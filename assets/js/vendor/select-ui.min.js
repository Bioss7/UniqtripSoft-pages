const getTemplate=(e=[],t,s,i)=>{let l=t??"Placeholder по умолч.";const a=e.map(e=>{let t="";return void 0===i?e.id===s&&(l=e.value,t="selected"):e.dataProp===i&&(l=e.value,t="selected"),`
            <li class="select-ui__item ${t}" data-type="item" data-id=${e.id} data-prop="${e.dataProp}">${e.value}</li>
        `});return`
    <div class="select-ui__backdrop" data-type="backdrop"></div>
    <div class="select-ui__input" data-type="input">
        <span data-type="value">${l}</span>
    </div>
    <div class="select-ui__dropdown">
        <ul class="select-ui__list">
           ${a.join("")}
        </ul>
    </div>
    `};class SelectUI{constructor(e,t){this.$el=document.querySelector(e),this.options=t,this.selectedId=t.selectedId,this.selectedDataProp=t.selectedDataProp,this.fakeSelect=document.querySelector(".select-ui-hide"),this.render(),this.setup()}render(){var{placeholder:e,data:t}=this.options;this.$el.classList.add("select-ui"),this.$el.innerHTML=getTemplate(t,e,this.selectedId,this.selectedDataProp),this.hideFakeSelect()}setup(){this.clickHandler=this.clickHandler.bind(this),this.$el.addEventListener("click",this.clickHandler),this.$arrow=this.$el.querySelector('[data-type="arrow"]'),this.$value=this.$el.querySelector('[data-type="value"]')}clickHandler(e){var t,{type:s}=e.target.dataset;"input"===s?this.toggle():"item"===s?(t=e.target.dataset.id,this.select(t)):"backdrop"===s?this.close():"item"==s&&(e=e.target.dataset.prop,this.select(e))}get isOpen(){return this.$el.classList.contains("open")}get current(){return this.options.data.find(e=>e.id===this.selectedId)}select(e,t){this.selectedId=e,this.selectedDataProp=t,this.$value.innerHTML=this.current.value,this.$el.querySelectorAll('[data-type="item"]').forEach(e=>{e.classList.remove("selected")}),this.$el.querySelector(`[data-id="${e}"]`).classList.add("selected"),this.options.onSelect&&this.options.onSelect(this.current),this.close()}toggle(){this.isOpen?this.close():this.open()}open(){this.$el.classList.add("open")}close(){this.$el.classList.remove("open")}destroy(){this.$el.removeEventListener("click",this.clickHandler),this.$el.innerHTML=""}hideFakeSelect(){null!==this.fakeSelect&&this.fakeSelect.remove()}}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".js-select");if(e){const e=new SelectUI(".js-select",{placeholder:"Выберите элемент",data:[{id:"1",value:"По популярности"},{id:"2",value:"По возрастанию цены"},{id:"3",value:"По возрастанию цены"},{id:"4",value:"По возрастанию цены"},{id:"5",value:"По возрастанию цены"},{id:"6",value:"По возрастанию цены"},{id:"7",value:"По возрастанию цены"},{id:"8",value:"По возрастанию цены"}],onSelect(e){}})}});